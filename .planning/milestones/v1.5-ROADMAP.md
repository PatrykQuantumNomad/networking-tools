# Milestone v1.5: Claude Skill Pack

**Status:** SHIPPED 2026-02-18
**Phases:** 28-33
**Total Plans:** 13

## Overview

Packaged the 17-tool, 81-script pentesting toolkit as a self-contained Claude Code skill pack with task-level and tool-level slash commands, safety/feedback hooks, and audit logging.

## Phases

### Phase 28: Safety Architecture
**Goal**: All Claude Code tool invocations pass through deterministic safety validation before execution, with structured feedback and a complete audit trail
**Depends on**: Nothing (first phase of v1.5)
**Plans**: 2 plans

Plans:
- [x] 28-01: PreToolUse/PostToolUse hooks with target validation, raw tool interception, JSON bridge, and audit logging
- [x] 28-02: Health-check bash script, Claude Code skill, and live verification

**Details:**
- PreToolUse hook validates targets against .pentest/scope.json allowlist with CIDR /24 and localhost equivalence
- PreToolUse hook intercepts raw tool commands (nmap, sqlmap, etc.) with redirect to wrapper scripts
- PostToolUse hook parses JSON envelope output and injects structured additionalContext to Claude
- Both hooks log to date-stamped JSONL audit files
- Health-check script with 13 checks across 5 categories and guided repair
- /netsec-health Claude Code skill for slash command access

### Phase 29: Core Tool Skills
**Goal**: Users can invoke the 5 most-used pentesting tools via Claude Code slash commands with zero-context-overhead skill files
**Depends on**: Phase 28 (safety hooks must validate commands before tool skills can run)
**Plans**: 2 plans

Plans:
- [x] 29-01: Create nmap, tshark, and metasploit skills
- [x] 29-02: Create sqlmap and nikto skills, verify all 5 work end-to-end

**Details:**
- Tool skill pattern validated: YAML frontmatter + categorized script references + flags + target validation
- All skills use disable-model-invocation: true (zero context overhead)
- Per-script accurate argument documentation (interface vs target vs LHOST/LPORT)

### Phase 30: Utility Skills & Lab Integration
**Goal**: Users can check tool availability, manage Docker lab targets, and benefit from automatic pentesting conventions context
**Depends on**: Phase 28 (audit logging covers utility invocations)
**Plans**: 1 plan

Plans:
- [x] 30-01: Create check-tools, lab, and pentest-conventions skills

**Details:**
- check-tools skill wraps scripts/check-tools.sh, documents all 18 tools
- lab skill wraps make lab-up/lab-down/lab-status with correct port mappings
- pentest-conventions background skill (79 lines, user-invocable: false)

### Phase 31: Remaining Tool Skills
**Goal**: All 17 tools have Claude Code skill files, completing full tool coverage
**Depends on**: Phase 29 (pattern validated with first 5 tools)
**Plans**: 3 plans

Plans:
- [x] 31-01: Offline/file-based tool skills (hashcat, john, aircrack-ng, foremost)
- [x] 31-02: Network tools with unique defaults (hping3, skipfish, netcat, traceroute)
- [x] 31-03: Web/DNS recon tool skills (dig, curl, gobuster, ffuf)

**Details:**
- Offline-tool Target Validation variant for file-based tools (no network scope needed)
- Aircrack-ng wireless Target Validation with BSSID scope
- Per-script default targets for skipfish (Juice Shop, DVWA)
- Netcat variant detection documentation
- 17 total tool skills with disable-model-invocation: true

### Phase 32: Workflow Skills
**Goal**: Users can invoke task-oriented slash commands that orchestrate multiple tool skills into coherent pentesting workflows
**Depends on**: Phase 31 (workflow skills reference tool skills that must exist)
**Plans**: 3 plans

Plans:
- [x] 32-01: Network workflow skills (/recon, /scan, /diagnose)
- [x] 32-02: Offensive workflow skills (/fuzz, /crack, /sniff)
- [x] 32-03: Management workflow skills (/report, /scope)

**Details:**
- /recon: 6-step reconnaissance (nmap, dig, curl, gobuster)
- /scan: 5-step vulnerability scanning (nmap, nikto, sqlmap, curl)
- /diagnose: 5-step diagnostics with Pattern B handling for diagnostics/ scripts
- /fuzz: 3-step web fuzzing (gobuster, ffuf, nikto)
- /crack: 5-step password cracking with identification-then-attack flow
- /sniff: 3-step traffic capture (tshark, live + pcap modes)
- /report: Structured findings report from session context
- /scope: CRUD management of .pentest/scope.json with confirmation gates

### Phase 33: Subagent Personas
**Goal**: Specialized subagents provide context-isolated, role-specific analysis for multi-tool pentesting workflows
**Depends on**: Phase 32 (agents orchestrate workflow and tool skills)
**Plans**: 2 plans

Plans:
- [x] 33-01: Pentester agent + /pentester skill shim + gitignore for agent-memory
- [x] 33-02: Defender + analyst agents with /defender and /analyst skill shims

**Details:**
- Pentester agent with 6 preloaded workflow skills and full Bash access
- Defender agent with read-only tools (Read, Grep, Glob) for defensive analysis
- Analyst agent with Read, Grep, Glob, Write for report synthesis
- All agents use context: fork for isolation and memory: project for persistence

---

## Milestone Summary

**Key Decisions:**
- Plugin wraps, never modifies existing scripts (scripts untouched)
- Start with project-level .claude/skills/, defer plugin packaging
- Deterministic safety hooks (bash+jq), not LLM-based
- Validate tool skill pattern with 5 before scaling to 17
- Tool skills use disable-model-invocation: true (zero context overhead)
- jq for all hook JSON construction (no string concatenation)
- curl/dig exception: only intercept bare IP/hostname, not URL-based commands
- All workflow skills use disable-model-invocation: true (user must invoke explicitly)
- /report synthesizes from conversation context only (never reads audit logs)
- /scope requires user confirmation before modifications
- Defender strictly read-only; analyst write-capable but no Bash

**Issues Resolved:**
- PostToolUse hook access to tool_response.stdout validated (field accessible as .tool_response.stdout)
- Skill description budget confirmed: 17 tool skills with disable-model-invocation add 0 bytes to context; 4 utility skills use ~8KB (50% of budget)
- Agent memory: project feature validated; .claude/agent-memory/ gitignored
- PreToolUse hook false positive on git commit messages containing common words (workaround: separate -m flags)

**Issues Deferred:**
- DIST-01: Convert skill pack to plugin format with .claude-plugin/plugin.json
- DIST-02: Publish plugin to GitHub-based marketplace
- DIST-03: npm package distribution
- ADV-01: Multi-phase /pentest orchestration command
- ADV-02: /practice guided walkthroughs
- ADV-03: Agent memory persistence across sessions

**Technical Debt Incurred:**
- REQUIREMENTS.md checkbox status not updated during execution (some requirements marked [ ] despite being complete)
- Traceability table not updated during execution (shows "Pending" for completed requirements)
- PreToolUse hook can false-positive on git commit messages containing IP-like patterns

---

_For current project status, see .planning/ROADMAP.md_
