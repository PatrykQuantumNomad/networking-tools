---
phase: 02-core-networking-tools
plan: 02
type: execute
wave: 2
depends_on: ["02-01"]
files_modified:
  - scripts/curl/examples.sh
  - scripts/curl/test-http-endpoints.sh
  - scripts/curl/check-ssl-certificate.sh
  - scripts/curl/debug-http-response.sh
  - scripts/check-tools.sh
  - Makefile
autonomous: true

must_haves:
  truths:
    - "Running bash scripts/curl/examples.sh https://example.com prints 10 numbered educational curl examples with explanations"
    - "Running bash scripts/curl/test-http-endpoints.sh prints educational examples for testing GET/POST/PUT/DELETE methods"
    - "Running bash scripts/curl/check-ssl-certificate.sh prints examples for checking SSL certificate validity, expiry, and chain"
    - "Running bash scripts/curl/debug-http-response.sh prints examples for HTTP timing breakdown using curl -w"
    - "make check detects curl as installed/missing alongside existing tools including dig"
  artifacts:
    - path: "scripts/curl/examples.sh"
      provides: "10 educational curl examples following Pattern A"
      contains: "require_target"
    - path: "scripts/curl/test-http-endpoints.sh"
      provides: "HTTP method testing use-case"
      contains: "require_cmd curl"
    - path: "scripts/curl/check-ssl-certificate.sh"
      provides: "SSL certificate inspection use-case"
      contains: "expire"
    - path: "scripts/curl/debug-http-response.sh"
      provides: "HTTP timing breakdown use-case"
      contains: "time_namelookup"
    - path: "scripts/check-tools.sh"
      provides: "curl detection in tool list"
      contains: "[curl]="
    - path: "Makefile"
      provides: "curl and use-case make targets"
      contains: "scripts/curl/examples.sh"
  key_links:
    - from: "scripts/curl/examples.sh"
      to: "scripts/common.sh"
      via: "source directive"
      pattern: 'source "\$\(dirname "\$0"\)/\.\./common\.sh"'
    - from: "scripts/check-tools.sh"
      to: "curl"
      via: "TOOLS array entry"
      pattern: "\\[curl\\]="
    - from: "Makefile"
      to: "scripts/curl/examples.sh"
      via: "make target"
      pattern: "bash scripts/curl/examples\\.sh"
---

<objective>
Create the curl tool directory with examples.sh (10 educational examples, Pattern A) and three use-case scripts (test-http-endpoints, check-ssl-certificate, debug-http-response). Integrate curl into check-tools.sh and Makefile.

Purpose: Second networking tool. curl teaches HTTP interaction -- essential for web application testing and API debugging.
Output: 4 executable bash scripts in scripts/curl/, updated check-tools.sh and Makefile.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-core-networking-tools/02-RESEARCH.md
@.planning/phases/02-core-networking-tools/02-01-SUMMARY.md
@scripts/common.sh
@scripts/nmap/examples.sh
@scripts/nmap/discover-live-hosts.sh
@scripts/check-tools.sh
@Makefile
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create curl examples.sh and three use-case scripts</name>
  <files>
    scripts/curl/examples.sh
    scripts/curl/test-http-endpoints.sh
    scripts/curl/check-ssl-certificate.sh
    scripts/curl/debug-http-response.sh
  </files>
  <action>
Create scripts/curl/ directory and four scripts following established patterns exactly.

**examples.sh** (Pattern A -- copy structure from scripts/nmap/examples.sh):
- Shebang, comment: `# curl/examples.sh -- curl: HTTP client and transfer tool`
- Source common.sh
- show_help() with Usage, description, examples (https://example.com, http://localhost:8080)
- Help flag check
- `require_cmd curl "apt install curl (Debian/Ubuntu) | brew install curl (macOS)"`
- `require_target "${1:-}"`
- `safety_banner`
- `TARGET="$1"`
- Header: `info "=== curl Examples ==="` and `info "Target: ${TARGET}"`
- 10 numbered examples from research: (1) Simple GET request, (2) Fetch response headers only -I, (3) Include headers with body -i, (4) Verbose full request/response -v, (5) Follow redirects -L, (6) POST request with data -X POST -d, (7) Custom headers -H, (8) Download to file -o, (9) HTTP timing breakdown with -w format string, (10) Ignore SSL errors -k (testing only)
- IMPORTANT: Do NOT mention wget anywhere. Per PITFALL-11, macOS does not ship wget.
- Interactive demo: `[[ ! -t 0 ]] && exit 0` then prompt, run `curl -I -s ${TARGET} | head -10`
- chmod +x

**test-http-endpoints.sh** (Use-case pattern):
- Source common.sh, show_help, require_cmd curl
- `TARGET="${1:-https://example.com}"` (sensible default)
- safety_banner, header
- Educational context: "Why test HTTP endpoints?" explaining different HTTP methods, status codes, content negotiation
- 10 examples: (1) GET request, (2) POST with form data, (3) POST with JSON body, (4) PUT request, (5) DELETE request, (6) PATCH request, (7) HEAD request (headers only), (8) OPTIONS request (allowed methods), (9) Send with custom User-Agent, (10) Follow redirects and show redirect chain with -L -v
- Interactive demo: `curl -s -o /dev/null -w "HTTP %{http_code}" ${TARGET}` (shows just status code)

**check-ssl-certificate.sh** (Use-case pattern):
- Source common.sh, show_help, require_cmd curl
- `TARGET="${1:-example.com}"` -- note: strip https:// if present for clean display, but use https:// in actual curl commands
- safety_banner, header
- Educational context: "Why check SSL certificates?" explaining TLS, cert validity, expiry, chain of trust
- 10 examples: (1) View SSL cert details via curl -vI, (2) Check cert expiry date, (3) Test TLS 1.2 support, (4) Test TLS 1.3 support, (5) Show full certificate chain, (6) Check cert for specific hostname (SNI), (7) Test with specific cipher, (8) Check HSTS header, (9) Verify cert without browsing -k vs without -k, (10) Check OCSP stapling
- Interactive demo: `curl -vI "https://${TARGET}" 2>&1 | grep -E "subject:|issuer:|expire|SSL connection"` (safe, informative)

**debug-http-response.sh** (Use-case pattern):
- Source common.sh, show_help, require_cmd curl
- `TARGET="${1:-https://example.com}"`
- safety_banner, header
- Educational context: "Why debug HTTP responses?" explaining latency diagnosis, timing phases, server behavior
- Define TIMING_FMT variable with the full timing breakdown format string (DNS Lookup, TCP Connect, TLS Handshake, Pre-Transfer, Redirect, First Byte, Total)
- 10 examples: (1) Full timing breakdown with -w, (2) Just total time, (3) Verbose headers and body, (4) Show only response headers, (5) Show response size, (6) Compare HTTP/1.1 vs HTTP/2 --http2, (7) Test with different DNS (--resolve), (8) Show redirect timing chain, (9) Measure time-to-first-byte specifically, (10) Save full debug trace to file --trace
- Interactive demo: Run the timing breakdown command against TARGET

All four scripts must be chmod +x.
  </action>
  <verify>
Run each script with --help flag and verify it exits 0:
```
bash scripts/curl/examples.sh --help
bash scripts/curl/test-http-endpoints.sh --help
bash scripts/curl/check-ssl-certificate.sh --help
bash scripts/curl/debug-http-response.sh --help
```
Run examples.sh with a target in non-interactive mode and count 10 numbered examples:
```
echo "" | bash scripts/curl/examples.sh https://example.com 2>&1 | grep -c "^\\[INFO\\].*[0-9]*)"
```
Expected: 10

Verify no wget references:
```
grep -ri wget scripts/curl/ || echo "No wget references found (correct)"
```
  </verify>
  <done>
All four curl scripts exist, are executable, follow Pattern A / use-case pattern, print 10 numbered examples each, contain zero wget references, and exit cleanly with --help.
  </done>
</task>

<task type="auto">
  <name>Task 2: Integrate curl into check-tools.sh and Makefile</name>
  <files>
    scripts/check-tools.sh
    Makefile
  </files>
  <action>
**check-tools.sh changes:**

1. Add curl to the TOOLS associative array:
   ```
   [curl]="apt install curl (Debian/Ubuntu) | brew install curl (macOS)"
   ```

2. Add `curl` to the TOOL_ORDER array after `dig`:
   ```
   TOOL_ORDER=(nmap tshark msfconsole aircrack-ng hashcat skipfish sqlmap hping3 john nikto foremost dig curl)
   ```
   Note: `dig` was added by plan 02-01. This plan appends `curl` after it.

3. curl works with the existing default `get_version()` case -- `curl --version | head -1` outputs a clean version string. No special case needed.

**Makefile changes:**

1. Add to the .PHONY line: `curl test-http check-ssl debug-http`

2. Add tool runner target (in the tool-specific runners section, after the dig target added by plan 02-01):
   ```makefile
   curl: ## Run curl examples (usage: make curl TARGET=<url>)
   	@bash scripts/curl/examples.sh $(TARGET)
   ```

3. Add use-case targets in the use-case scripts section:
   ```makefile
   test-http: ## Test HTTP endpoints (usage: make test-http TARGET=<url>)
   	@bash scripts/curl/test-http-endpoints.sh $(or $(TARGET),https://example.com)

   check-ssl: ## Check SSL certificate (usage: make check-ssl TARGET=<domain>)
   	@bash scripts/curl/check-ssl-certificate.sh $(or $(TARGET),example.com)

   debug-http: ## Debug HTTP response timing (usage: make debug-http TARGET=<url>)
   	@bash scripts/curl/debug-http-response.sh $(or $(TARGET),https://example.com)
   ```

IMPORTANT: Makefile recipes MUST use actual tab characters for indentation, not spaces.
  </action>
  <verify>
```
make help 2>&1 | grep -E "curl|test-http|check-ssl|debug-http"
```
Expected: 4 lines showing the new targets.

```
bash scripts/check-tools.sh 2>&1 | grep -i curl
```
Expected: Shows curl with version.
  </verify>
  <done>
`make check` shows curl in the tool list with version. `make help` shows curl, test-http, check-ssl, and debug-http targets. `make curl TARGET=https://example.com` runs curl examples.
  </done>
</task>

</tasks>

<verification>
1. All four curl scripts exist and are executable:
   `ls -la scripts/curl/*.sh`
2. Each script sources common.sh and follows Pattern A / use-case pattern
3. `bash scripts/curl/examples.sh https://example.com` prints 10 numbered examples (non-interactive)
4. `make check` includes curl in its output
5. `make help` shows curl, test-http, check-ssl, debug-http
6. Zero references to wget in scripts/curl/
</verification>

<success_criteria>
- scripts/curl/examples.sh prints 10 numbered educational curl examples for a given target
- Three use-case scripts (test-http-endpoints, check-ssl-certificate, debug-http-response) each print 10 numbered examples
- check-tools.sh detects curl and displays its version
- Makefile has working targets for curl and all three use-cases
- No wget references anywhere in curl scripts (PITFALL-11)
- All scripts follow established patterns (source common.sh, show_help, safety_banner)
</success_criteria>

<output>
After completion, create `.planning/phases/02-core-networking-tools/02-02-SUMMARY.md`
</output>
