---
phase: 27-documentation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - scripts/aircrack-ng/analyze-wireless-networks.sh
  - scripts/aircrack-ng/capture-handshake.sh
  - scripts/aircrack-ng/crack-wpa-handshake.sh
  - scripts/curl/check-ssl-certificate.sh
  - scripts/curl/debug-http-response.sh
  - scripts/curl/test-http-endpoints.sh
  - scripts/dig/attempt-zone-transfer.sh
  - scripts/dig/check-dns-propagation.sh
  - scripts/dig/query-dns-records.sh
  - scripts/ffuf/fuzz-parameters.sh
  - scripts/foremost/analyze-forensic-image.sh
  - scripts/foremost/carve-specific-filetypes.sh
  - scripts/foremost/recover-deleted-files.sh
  - scripts/gobuster/discover-directories.sh
  - scripts/gobuster/enumerate-subdomains.sh
  - scripts/hashcat/benchmark-gpu.sh
  - scripts/hashcat/crack-ntlm-hashes.sh
  - scripts/hashcat/crack-web-hashes.sh
  - scripts/hping3/detect-firewall.sh
  - scripts/hping3/test-firewall-rules.sh
  - scripts/john/crack-archive-passwords.sh
  - scripts/john/crack-linux-passwords.sh
  - scripts/john/identify-hash-type.sh
  - scripts/metasploit/generate-reverse-shell.sh
  - scripts/metasploit/scan-network-services.sh
  - scripts/metasploit/setup-listener.sh
  - scripts/netcat/scan-ports.sh
  - scripts/netcat/setup-listener.sh
  - scripts/netcat/transfer-files.sh
  - scripts/nikto/scan-multiple-hosts.sh
  - scripts/nikto/scan-specific-vulnerabilities.sh
  - scripts/nikto/scan-with-auth.sh
  - scripts/nmap/discover-live-hosts.sh
  - scripts/nmap/identify-ports.sh
  - scripts/nmap/scan-web-vulnerabilities.sh
  - scripts/skipfish/quick-scan-web-app.sh
  - scripts/skipfish/scan-authenticated-app.sh
  - scripts/sqlmap/bypass-waf.sh
  - scripts/sqlmap/dump-database.sh
  - scripts/sqlmap/test-all-parameters.sh
  - scripts/traceroute/compare-routes.sh
  - scripts/traceroute/diagnose-latency.sh
  - scripts/traceroute/trace-network-path.sh
  - scripts/tshark/analyze-dns-queries.sh
  - scripts/tshark/capture-http-credentials.sh
  - scripts/tshark/extract-files-from-capture.sh
autonomous: true

must_haves:
  truths:
    - "Running any use-case script with -h shows -j/--json in the help output"
    - "All 46 @usage metadata headers include [-j|--json]"
    - "The -j/--json flag has a clear description explaining what it does"
  artifacts:
    - path: "scripts/*/[!e]*.sh"
      provides: "Updated show_help() with Flags section and @usage header with -j|--json"
  key_links:
    - from: "scripts/*/*.sh @usage header"
      to: "scripts/lib/args.sh parse_common_args"
      via: "@usage documents the -j flag that parse_common_args already handles"
      pattern: "\\[-j\\|--json\\]"
---

<objective>
Update all 46 use-case scripts to document the `-j`/`--json` flag in both their `@usage` metadata headers and `show_help()` functions.

Purpose: Users need to discover the JSON output capability through `--help` and script headers. This is the final step in v1.4 JSON Output Mode.
Output: All 46 use-case scripts with updated `@usage` headers and `show_help()` functions documenting `-j`/`--json`.
</objective>

<execution_context>
@/Users/patrykattc/.claude/get-shit-done/workflows/execute-plan.md
@/Users/patrykattc/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/27-documentation/27-RESEARCH.md
@scripts/nmap/discover-live-hosts.sh (example: no existing Options section)
@scripts/traceroute/compare-routes.sh (example: has existing Options section)
@scripts/curl/check-ssl-certificate.sh (example: has -v/-q in Usage line)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update @usage headers and show_help() for all 46 use-case scripts</name>
  <files>
    scripts/aircrack-ng/analyze-wireless-networks.sh
    scripts/aircrack-ng/capture-handshake.sh
    scripts/aircrack-ng/crack-wpa-handshake.sh
    scripts/curl/check-ssl-certificate.sh
    scripts/curl/debug-http-response.sh
    scripts/curl/test-http-endpoints.sh
    scripts/dig/attempt-zone-transfer.sh
    scripts/dig/check-dns-propagation.sh
    scripts/dig/query-dns-records.sh
    scripts/ffuf/fuzz-parameters.sh
    scripts/foremost/analyze-forensic-image.sh
    scripts/foremost/carve-specific-filetypes.sh
    scripts/foremost/recover-deleted-files.sh
    scripts/gobuster/discover-directories.sh
    scripts/gobuster/enumerate-subdomains.sh
    scripts/hashcat/benchmark-gpu.sh
    scripts/hashcat/crack-ntlm-hashes.sh
    scripts/hashcat/crack-web-hashes.sh
    scripts/hping3/detect-firewall.sh
    scripts/hping3/test-firewall-rules.sh
    scripts/john/crack-archive-passwords.sh
    scripts/john/crack-linux-passwords.sh
    scripts/john/identify-hash-type.sh
    scripts/metasploit/generate-reverse-shell.sh
    scripts/metasploit/scan-network-services.sh
    scripts/metasploit/setup-listener.sh
    scripts/netcat/scan-ports.sh
    scripts/netcat/setup-listener.sh
    scripts/netcat/transfer-files.sh
    scripts/nikto/scan-multiple-hosts.sh
    scripts/nikto/scan-specific-vulnerabilities.sh
    scripts/nikto/scan-with-auth.sh
    scripts/nmap/discover-live-hosts.sh
    scripts/nmap/identify-ports.sh
    scripts/nmap/scan-web-vulnerabilities.sh
    scripts/skipfish/quick-scan-web-app.sh
    scripts/skipfish/scan-authenticated-app.sh
    scripts/sqlmap/bypass-waf.sh
    scripts/sqlmap/dump-database.sh
    scripts/sqlmap/test-all-parameters.sh
    scripts/traceroute/compare-routes.sh
    scripts/traceroute/diagnose-latency.sh
    scripts/traceroute/trace-network-path.sh
    scripts/tshark/analyze-dns-queries.sh
    scripts/tshark/capture-http-credentials.sh
    scripts/tshark/extract-files-from-capture.sh
  </files>
  <action>
For each of the 46 use-case scripts, make TWO edits:

**Edit 1: @usage metadata header** (lines 1-6 of every script)

Append ` [-j|--json]` to the end of the existing `# @usage` line. Every script already has `[-h|--help] [-x|--execute]` in the @usage header.

Before: `# @usage        nmap/discover-live-hosts.sh [target] [-h|--help] [-x|--execute]`
After:  `# @usage        nmap/discover-live-hosts.sh [target] [-h|--help] [-x|--execute] [-j|--json]`

**Edit 2: show_help() function** -- TWO sub-edits per script:

(a) Update the `echo "Usage: ..."` line inside show_help() to include `[-j|--json]`. Append it after whatever flags are already listed.

Before: `echo "Usage: $(basename "$0") [target] [-h|--help]"`
After:  `echo "Usage: $(basename "$0") [target] [-h|--help] [-j|--json]"`

(b) Add a Flags/Options section to show_help(). There are TWO distinct patterns depending on what the script already has:

**Pattern A -- 5 scripts that already have an "Options:" section** (gobuster/discover-directories, gobuster/enumerate-subdomains, traceroute/compare-routes, traceroute/trace-network-path, traceroute/diagnose-latency):
- These already list `-h`, `-x`, `-v`, `-q` under "Options:".
- Add ONE new line `echo "  -j, --json       Output results as JSON (requires jq)"` after the `-h, --help` line in the existing Options section.
- Do NOT create a new Flags section; use the existing Options section.
- Also add `[-j|--json]` to the Usage line if not already there.

**Pattern B -- 41 scripts that do NOT have an Options/Flags section:**
- Add a new "Flags:" section AFTER the last `echo` line inside show_help() (before the closing `}`).
- The Flags section lists 3 flags: -h, -j, -x. Add:
```
    echo ""
    echo "Flags:"
    echo "  -h, --help     Show this help message"
    echo "  -j, --json     Output results as JSON (requires jq)"
    echo "  -x, --execute  Execute commands instead of displaying them"
```

**IMPORTANT NOTES:**
- Do NOT modify anything outside show_help() and the @usage header. No functional changes.
- Do NOT update examples.sh files (out of scope -- they do not support -j).
- Preserve exact existing indentation in each script (4-space indent for echo lines inside show_help()).
- For the 6 scripts that already show `-x|--execute` in their Usage line (curl/*, dig/*), keep those existing flags and just append `[-j|--json]`.
- For scripts that show `-v|--verbose` and `-q|--quiet` on the Usage line (curl/*, dig/*), keep those flags on the Usage line and include them in the Flags section too:
```
    echo ""
    echo "Flags:"
    echo "  -h, --help     Show this help message"
    echo "  -j, --json     Output results as JSON (requires jq)"
    echo "  -x, --execute  Execute commands instead of displaying them"
    echo "  -v, --verbose  Increase output verbosity"
    echo "  -q, --quiet    Suppress informational output"
```

Process scripts in tool-alphabetical order to avoid missing any. Verify count reaches 46 when done.
  </action>
  <verify>
Run the following checks:
1. `grep -r '\-j|--json' scripts/*/[!e]*.sh | grep '@usage' | wc -l` — must be 46 (all @usage headers updated)
2. `for f in $(find scripts -name '*.sh' -not -path '*/lib/*' -not -name 'common.sh' -not -name 'check-docs-completeness.sh' -not -path '*/diagnostics/*' -not -name 'check-tools.sh' -not -name 'examples.sh' | sort); do bash "$f" --help 2>&1 | grep -q '\-\-json' || echo "MISSING: $f"; done` — no output means all scripts document --json in help
3. Run existing tests: `bats tests/intg-cli-contracts.bats tests/intg-script-headers.bats` — all existing tests must still pass
  </verify>
  <done>
All 46 use-case scripts have (1) `[-j|--json]` in their @usage metadata header, (2) `[-j|--json]` on the Usage line in show_help(), and (3) a Flags/Options section describing `-j, --json` as "Output results as JSON (requires jq)". Running any script with `--help` shows the -j flag with a clear description. Existing INTG-01 and HDR-06 tests still pass.
  </done>
</task>

</tasks>

<verification>
1. All 46 use-case scripts' `@usage` headers contain `[-j|--json]`
2. All 46 use-case scripts' `--help` output contains `--json` with a description
3. Existing test suite passes: `bats tests/intg-cli-contracts.bats tests/intg-script-headers.bats`
4. No functional changes -- scripts behave identically before and after
</verification>

<success_criteria>
- grep -c confirms 46 @usage headers updated
- `bash <script> --help` for all 46 scripts shows `--json` flag with description
- `bats tests/` full suite passes with no regressions
</success_criteria>

<output>
After completion, create `.planning/phases/27-documentation/27-01-SUMMARY.md`
</output>
