---
phase: 22-script-metadata-headers
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - scripts/aircrack-ng/analyze-wireless-networks.sh
  - scripts/aircrack-ng/capture-handshake.sh
  - scripts/aircrack-ng/crack-wpa-handshake.sh
  - scripts/curl/check-ssl-certificate.sh
  - scripts/curl/debug-http-response.sh
  - scripts/curl/test-http-endpoints.sh
  - scripts/dig/attempt-zone-transfer.sh
  - scripts/dig/check-dns-propagation.sh
  - scripts/dig/query-dns-records.sh
  - scripts/ffuf/fuzz-parameters.sh
  - scripts/foremost/analyze-forensic-image.sh
  - scripts/foremost/carve-specific-filetypes.sh
  - scripts/foremost/recover-deleted-files.sh
  - scripts/gobuster/discover-directories.sh
  - scripts/gobuster/enumerate-subdomains.sh
  - scripts/hashcat/benchmark-gpu.sh
  - scripts/hashcat/crack-ntlm-hashes.sh
  - scripts/hashcat/crack-web-hashes.sh
  - scripts/hping3/detect-firewall.sh
  - scripts/hping3/test-firewall-rules.sh
  - scripts/john/crack-archive-passwords.sh
  - scripts/john/crack-linux-passwords.sh
  - scripts/john/identify-hash-type.sh
  - scripts/metasploit/generate-reverse-shell.sh
  - scripts/metasploit/scan-network-services.sh
  - scripts/metasploit/setup-listener.sh
  - scripts/netcat/scan-ports.sh
  - scripts/netcat/setup-listener.sh
  - scripts/netcat/transfer-files.sh
  - scripts/nikto/scan-multiple-hosts.sh
  - scripts/nikto/scan-specific-vulnerabilities.sh
  - scripts/nikto/scan-with-auth.sh
  - scripts/nmap/discover-live-hosts.sh
  - scripts/nmap/identify-ports.sh
  - scripts/nmap/scan-web-vulnerabilities.sh
  - scripts/skipfish/quick-scan-web-app.sh
  - scripts/skipfish/scan-authenticated-app.sh
  - scripts/sqlmap/bypass-waf.sh
  - scripts/sqlmap/dump-database.sh
  - scripts/sqlmap/test-all-parameters.sh
  - scripts/traceroute/compare-routes.sh
  - scripts/traceroute/diagnose-latency.sh
  - scripts/traceroute/trace-network-path.sh
  - scripts/tshark/analyze-dns-queries.sh
  - scripts/tshark/capture-http-credentials.sh
  - scripts/tshark/extract-files-from-capture.sh
autonomous: true

must_haves:
  truths:
    - "All 46 use-case scripts have @description, @usage, and @dependencies fields in the first 10 lines"
    - "Headers are pure comments with zero behavioral change"
    - "Existing show_help() functions are untouched -- headers supplement, not replace"
  artifacts:
    - path: "scripts/nmap/identify-ports.sh"
      contains: "# @description"
    - path: "scripts/sqlmap/dump-database.sh"
      contains: "# @description"
    - path: "scripts/tshark/extract-files-from-capture.sh"
      contains: "# @description"
  key_links:
    - from: "header block"
      to: "shebang line"
      via: "placed between shebang and first source line"
      pattern: "head -10.*@description"
---

<objective>
Add structured metadata headers to all 46 use-case scripts across all tool directories. This covers HDR-03.

Purpose: Complete the bulk of header additions (46 of 78 files), giving every use-case script machine-parseable metadata.
Output: 46 use-case script files with conformant `@description`, `@usage`, `@dependencies` headers.
</objective>

<execution_context>
@/Users/patrykattc/.claude/get-shit-done/workflows/execute-plan.md
@/Users/patrykattc/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/22-script-metadata-headers/22-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add headers to use-case scripts aircrack-ng through john (23 files)</name>
  <files>
    scripts/aircrack-ng/analyze-wireless-networks.sh
    scripts/aircrack-ng/capture-handshake.sh
    scripts/aircrack-ng/crack-wpa-handshake.sh
    scripts/curl/check-ssl-certificate.sh
    scripts/curl/debug-http-response.sh
    scripts/curl/test-http-endpoints.sh
    scripts/dig/attempt-zone-transfer.sh
    scripts/dig/check-dns-propagation.sh
    scripts/dig/query-dns-records.sh
    scripts/ffuf/fuzz-parameters.sh
    scripts/foremost/analyze-forensic-image.sh
    scripts/foremost/carve-specific-filetypes.sh
    scripts/foremost/recover-deleted-files.sh
    scripts/gobuster/discover-directories.sh
    scripts/gobuster/enumerate-subdomains.sh
    scripts/hashcat/benchmark-gpu.sh
    scripts/hashcat/crack-ntlm-hashes.sh
    scripts/hashcat/crack-web-hashes.sh
    scripts/hping3/detect-firewall.sh
    scripts/hping3/test-firewall-rules.sh
    scripts/john/crack-archive-passwords.sh
    scripts/john/crack-linux-passwords.sh
    scripts/john/identify-hash-type.sh
  </files>
  <action>
    Replace the single-line comment header (line 2, e.g., `# nmap/identify-ports.sh -- Description`) in each file with the bordered annotation block.

    **Format for every use-case script:**
    ```
    # ============================================================================
    # @description  <description from existing line-2 comment>
    # @usage        <tool>/<script-name>.sh [target] [-h|--help] [-x|--execute]
    # @dependencies <tool>, common.sh
    # ============================================================================
    ```

    **Process for each file:**
    1. Read the file to see the current line 2 comment (e.g., `# aircrack-ng/analyze-wireless-networks.sh -- Analyze nearby wireless networks`)
    2. Extract the description portion after the `--` dash separator
    3. Replace line 2 with the 5-line bordered block (opening border, @description, @usage, @dependencies, closing border)
    4. The `source` line follows immediately after the closing border

    **@dependencies per tool directory:**
    - aircrack-ng: `aircrack-ng, common.sh`
    - curl: `curl, common.sh`
    - dig: `dig, common.sh`
    - ffuf: `ffuf, common.sh`
    - foremost: `foremost, common.sh`
    - gobuster: `gobuster, common.sh`
    - hashcat: `hashcat, common.sh`
    - hping3: `hping3, common.sh`
    - john: `john, common.sh`

    **Critical rules:**
    - Every line in the header block MUST start with `#`
    - Preserve the shebang line (line 1) exactly
    - Preserve the `source` line and everything after it exactly
    - Read each file's existing description -- do not invent descriptions
  </action>
  <verify>
    For each file: `head -10 FILE | grep -c '# @description'` returns 1.
    `bash -n FILE` exits 0 for each file.
  </verify>
  <done>
    23 use-case scripts (aircrack-ng through john) have conformant bordered header blocks with @description, @usage, @dependencies.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add headers to use-case scripts metasploit through tshark (23 files)</name>
  <files>
    scripts/metasploit/generate-reverse-shell.sh
    scripts/metasploit/scan-network-services.sh
    scripts/metasploit/setup-listener.sh
    scripts/netcat/scan-ports.sh
    scripts/netcat/setup-listener.sh
    scripts/netcat/transfer-files.sh
    scripts/nikto/scan-multiple-hosts.sh
    scripts/nikto/scan-specific-vulnerabilities.sh
    scripts/nikto/scan-with-auth.sh
    scripts/nmap/discover-live-hosts.sh
    scripts/nmap/identify-ports.sh
    scripts/nmap/scan-web-vulnerabilities.sh
    scripts/skipfish/quick-scan-web-app.sh
    scripts/skipfish/scan-authenticated-app.sh
    scripts/sqlmap/bypass-waf.sh
    scripts/sqlmap/dump-database.sh
    scripts/sqlmap/test-all-parameters.sh
    scripts/traceroute/compare-routes.sh
    scripts/traceroute/diagnose-latency.sh
    scripts/traceroute/trace-network-path.sh
    scripts/tshark/analyze-dns-queries.sh
    scripts/tshark/capture-http-credentials.sh
    scripts/tshark/extract-files-from-capture.sh
  </files>
  <action>
    Same process as Task 1, applied to the remaining 23 use-case scripts.

    **@dependencies per tool directory:**
    - metasploit: `msfconsole, common.sh`
    - netcat: `nc, common.sh`
    - nikto: `nikto, common.sh`
    - nmap: `nmap, common.sh`
    - skipfish: `skipfish, common.sh`
    - sqlmap: `sqlmap, common.sh`
    - traceroute: `traceroute, common.sh` (diagnose-latency.sh also needs `mtr`)
    - tshark: `tshark, common.sh`

    **Special case:** `scripts/traceroute/diagnose-latency.sh` -- check if it requires `mtr` in addition to `traceroute`. If so, `@dependencies traceroute, mtr, common.sh`.

    **Same critical rules as Task 1:**
    - Every line MUST start with `#`
    - Preserve shebang, source line, and all code after header
    - Read existing description from each file's current comment
  </action>
  <verify>
    For each file: `head -10 FILE | grep -c '# @description'` returns 1.
    `bash -n FILE` exits 0 for each file.
  </verify>
  <done>
    23 use-case scripts (metasploit through tshark) have conformant bordered header blocks with @description, @usage, @dependencies.
  </done>
</task>

</tasks>

<verification>
1. `for f in scripts/*/!(examples).sh; do [[ "$(basename "$f")" == "common.sh" || "$(basename "$f")" == "check-tools.sh" || "$(basename "$f")" == "check-docs-completeness.sh" ]] && continue; [[ -d "$(dirname "$f")/lib" ]] && continue; head -10 "$f" | grep -q '# @description' && head -10 "$f" | grep -q '# @usage' && head -10 "$f" | grep -q '# @dependencies' || echo "MISSING: $f"; done` — all 46 use-case scripts pass.
2. `for f in scripts/*/!(examples).sh; do bash -n "$f" 2>&1 || echo "SYNTAX ERROR: $f"; done` — no syntax errors.
3. `make test` — existing BATS tests pass with no regressions.
</verification>

<success_criteria>
- 46 use-case script files have structured `@description`, `@usage`, `@dependencies` headers
- All headers are within the first 10 lines of each file
- Zero syntax errors across all modified files
- Existing BATS tests pass with no regressions
</success_criteria>

<output>
After completion, create `.planning/phases/22-script-metadata-headers/22-02-SUMMARY.md`
</output>
