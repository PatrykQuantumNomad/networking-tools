---
phase: 32-workflow-skills
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - .claude/skills/report/SKILL.md
  - .claude/skills/scope/SKILL.md
autonomous: true
requirements: [WKFL-07, WKFL-08]

must_haves:
  truths:
    - "User can invoke /report and Claude generates a structured findings report organized by severity with executive summary, scope, findings, and recommendations"
    - "User can invoke /scope add/remove/show/clear/init and Claude manages .pentest/scope.json with appropriate jq operations"
    - "/report synthesizes from conversation context, NOT from audit log files"
    - "/scope always confirms with user before modifying the scope file"
    - "Both skills have disable-model-invocation: true in frontmatter"
    - "/scope show is the default operation when no subcommand is provided"
  artifacts:
    - path: ".claude/skills/report/SKILL.md"
      provides: "Findings report generation from session context"
      contains: "disable-model-invocation: true"
    - path: ".claude/skills/scope/SKILL.md"
      provides: "Scope management (add/remove/show/clear/init) for .pentest/scope.json"
      contains: "disable-model-invocation: true"
  key_links:
    - from: ".claude/skills/scope/SKILL.md"
      to: ".pentest/scope.json"
      via: "jq read/write operations"
      pattern: "scope\\.json"
    - from: ".claude/skills/report/SKILL.md"
      to: "report-*.md"
      via: "markdown file generation"
      pattern: "report-"
---

<objective>
Create 2 management workflow skills (/report, /scope) that handle reporting and configuration rather than tool orchestration.

Purpose: These workflows do NOT execute tool scripts. /report synthesizes all session findings into a structured markdown document. /scope manages the .pentest/scope.json file that the PreToolUse hook uses for target validation. Both are simpler than the tool-orchestrating workflows.

Output: 2 SKILL.md files in `.claude/skills/{report,scope}/SKILL.md`
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/32-workflow-skills/32-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create /report and /scope workflow skills</name>
  <files>.claude/skills/report/SKILL.md, .claude/skills/scope/SKILL.md</files>
  <action>
Create SKILL.md for /report and /scope workflows. These are management workflows that do NOT invoke tool scripts.

**report** (`.claude/skills/report/SKILL.md`):
- Frontmatter: name: report, description: "Generate a structured pentesting findings report from the current session", argument-hint: "[title]", disable-model-invocation: true
- H1: "Findings Report"
- Purpose line: "Generate a structured report of all pentesting findings from this session."
- Report Title section: "Title: $ARGUMENTS" -- "If no title provided, use 'Pentesting Findings Report' with today's date."
- Instructions section: "Synthesize all findings from the current conversation into a structured markdown report. Do NOT read audit log files -- use the results and summaries from this session's tool outputs."
- Report Structure section with the exact markdown template:
  ```
  # [Title]
  **Date:** [today's date]
  **Scope:** [targets from .pentest/scope.json]
  **Tools Used:** [list tools run in this session]

  ## Executive Summary
  [2-3 sentence overview of key findings and risk level]

  ## Scope & Methodology
  - Target(s) tested
  - Tools and techniques used
  - Testing approach

  ## Findings
  ### Critical
  ### High
  ### Medium
  ### Low / Informational

  ## Recommendations
  [Prioritized actions]

  ## Appendix
  [Raw data references, tool versions, timestamps]
  ```
- Output section: "Write the report to `report-YYYY-MM-DD.md` in the project root. Also display a brief summary inline in the conversation."

**scope** (`.claude/skills/scope/SKILL.md`):
- Frontmatter: name: scope, description: "Define and manage target scope for pentesting engagements", argument-hint: "&lt;add|remove|show|clear|init&gt; [target]", disable-model-invocation: true
- H1: "Scope Management"
- Purpose line: "Manage the target scope file at `.pentest/scope.json`. All pentesting commands validate targets against this file via the PreToolUse hook."
- Operations section: "Parse the first argument from $ARGUMENTS to determine the operation. Remaining arguments are the target(s)."
- 5 operations, each with exact commands:
  - **show** (default): `cat .pentest/scope.json 2>/dev/null || echo "No scope file found. Run /scope init to create one."` -- default when no operation specified
  - **add &lt;target&gt;**: Always confirm with user first. Read, add with jq: `jq --arg t "TARGET" '.targets += [$t] | .targets |= unique' .pentest/scope.json > .pentest/scope.tmp && mv .pentest/scope.tmp .pentest/scope.json`. Show updated scope.
  - **remove &lt;target&gt;**: Confirm with user. Remove with jq: `jq --arg t "TARGET" '.targets -= [$t]' .pentest/scope.json > .pentest/scope.tmp && mv .pentest/scope.tmp .pentest/scope.json`. Show updated scope.
  - **init**: Create with safe defaults: `mkdir -p .pentest && echo '{"targets":["localhost","127.0.0.1"]}' > .pentest/scope.json`
  - **clear**: Confirm with user. Reset: `echo '{"targets":[]}' > .pentest/scope.json`
- Important section:
  - Always confirm with the user before modifying scope (add, remove, clear)
  - Default safe targets: localhost, 127.0.0.1
  - Lab targets to suggest adding: localhost (covers all lab ports on 8080, 3030, 8888, 8180)
  - The .pentest/ directory is gitignored
  - Scope file format: `{"targets": ["target1", "target2"]}`

Follow the exact research examples in 32-RESEARCH.md. Keep each skill under 200 lines. /report must NOT reference audit logs. /scope must always confirm before modifications.
  </action>
  <verify>
Verify both files exist and have correct structure:
- `head -5 .claude/skills/report/SKILL.md` shows YAML frontmatter with disable-model-invocation: true
- `head -5 .claude/skills/scope/SKILL.md` shows YAML frontmatter with disable-model-invocation: true
- `grep -c 'bash scripts/' .claude/skills/report/SKILL.md` returns 0 (no tool script references)
- `grep -c 'bash scripts/' .claude/skills/scope/SKILL.md` returns 0 (no tool script references)
- `grep 'audit' .claude/skills/report/SKILL.md` confirms "Do NOT read audit log files" instruction
- `grep 'scope.json' .claude/skills/scope/SKILL.md` confirms scope file references
- `grep -c 'confirm' .claude/skills/scope/SKILL.md` shows multiple confirmation requirements
- `grep 'jq' .claude/skills/scope/SKILL.md` confirms jq usage for JSON manipulation
- Neither file exceeds 200 lines: `wc -l .claude/skills/report/SKILL.md .claude/skills/scope/SKILL.md`
  </verify>
  <done>report and scope SKILL.md files exist. /report generates structured findings from conversation context (not audit logs). /scope manages .pentest/scope.json with 5 operations (show/add/remove/init/clear) and user confirmation requirements.</done>
</task>

</tasks>

<verification>
- Both files exist: `.claude/skills/{report,scope}/SKILL.md`
- Both have `disable-model-invocation: true` in frontmatter
- /report contains structured report template with severity-organized findings
- /report explicitly states "Do NOT read audit log files"
- /report writes output to `report-YYYY-MM-DD.md`
- /scope has all 5 operations (show, add, remove, init, clear)
- /scope uses jq for JSON manipulation
- /scope requires user confirmation before modifications
- Neither skill references tool scripts (no `bash scripts/` paths)
- Neither skill exceeds 200 lines
</verification>

<success_criteria>
- 2 workflow SKILL.md files created for /report and /scope
- /report synthesizes from conversation context, NOT audit logs
- /scope manages .pentest/scope.json with complete CRUD operations
- /scope always confirms before modification
- Both use disable-model-invocation: true
</success_criteria>

<output>
After completion, create `.planning/phases/32-workflow-skills/32-03-SUMMARY.md`
</output>
