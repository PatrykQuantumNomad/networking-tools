---
phase: 07-web-enumeration-tools
plan: 02
type: execute
wave: 2
depends_on: ["07-01"]
files_modified:
  - scripts/ffuf/examples.sh
  - scripts/ffuf/fuzz-parameters.sh
  - scripts/check-tools.sh
  - Makefile
  - site/src/content/docs/tools/ffuf.mdx
autonomous: true

must_haves:
  truths:
    - "Running bash scripts/ffuf/examples.sh <url> prints 10 numbered educational examples for ffuf"
    - "Running make fuzz-params TARGET=<url> fuzzes parameters against a target"
    - "make check detects ffuf with clear install hints (Homebrew + Go install)"
    - "CI docs-completeness check passes with ffuf.mdx present"
  artifacts:
    - path: "scripts/ffuf/examples.sh"
      provides: "10 numbered ffuf examples following Pattern A"
      min_lines: 80
    - path: "scripts/ffuf/fuzz-parameters.sh"
      provides: "Parameter fuzzing use-case with wordlist check"
      min_lines: 60
    - path: "site/src/content/docs/tools/ffuf.mdx"
      provides: "Site documentation with install tabs"
      contains: "import { Tabs, TabItem }"
  key_links:
    - from: "scripts/ffuf/examples.sh"
      to: "scripts/common.sh"
      via: "source directive"
      pattern: 'source.*common\.sh'
    - from: "scripts/ffuf/fuzz-parameters.sh"
      to: "wordlists/"
      via: "WORDLIST variable pointing to PROJECT_ROOT/wordlists/"
      pattern: 'PROJECT_ROOT.*wordlists'
    - from: "scripts/check-tools.sh"
      to: "ffuf"
      via: "TOOLS array and TOOL_ORDER"
      pattern: "\\[ffuf\\]"
    - from: "Makefile"
      to: "scripts/ffuf/examples.sh"
      via: "ffuf target"
      pattern: "ffuf:.*scripts/ffuf"
---

<objective>
Create ffuf examples.sh with 10 educational examples, one use-case script (fuzz-parameters), integrate into check-tools.sh and Makefile, and add the ffuf.mdx site documentation page.

Purpose: Complete the web fuzzing capability alongside gobuster, giving users both a directory enumerator and a flexible web fuzzer.
Output: 2 new scripts in scripts/ffuf/, updated check-tools.sh and Makefile (building on 07-01 changes), new ffuf.mdx site page.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07-web-enumeration-tools/07-RESEARCH.md
@.planning/phases/07-web-enumeration-tools/07-01-SUMMARY.md

@scripts/gobuster/examples.sh
@scripts/check-tools.sh
@Makefile
@site/src/content/docs/tools/gobuster.mdx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create ffuf examples.sh and fuzz-parameters use-case script</name>
  <files>
    scripts/ffuf/examples.sh
    scripts/ffuf/fuzz-parameters.sh
  </files>
  <action>
    Create scripts/ffuf/ directory and two scripts following the exact Pattern A and use-case patterns.

    **examples.sh** (Pattern A -- 10 educational examples):
    - Shebang: #!/usr/bin/env bash
    - Source common.sh: source "$(dirname "$0")/../common.sh"
    - show_help() with Usage/Description/Examples
    - Help flag check: [[ "${1:-}" =~ ^(-h|--help)$ ]] && show_help && exit 0
    - require_cmd ffuf "brew install ffuf (or: go install github.com/ffuf/ffuf/v2@latest)"
    - require_target "${1:-}"
    - safety_banner
    - TARGET="$1"
    - info "=== ffuf Examples ===" header
    - Note about the FUZZ keyword: ffuf replaces the keyword FUZZ in the URL/headers/data with each wordlist entry
    - 10 numbered examples covering:
      1) Basic directory fuzzing: ffuf -u $TARGET/FUZZ -w wordlists/common.txt -t 10
      2) Filter by status code (-mc 200,301): ffuf -u $TARGET/FUZZ -w wordlists/common.txt -mc 200,301 -t 10
      3) Filter by response size (-fs): ffuf -u $TARGET/FUZZ -w wordlists/common.txt -fs 4242 -t 10
      4) Auto-calibration (-ac): ffuf -u $TARGET/FUZZ -w wordlists/common.txt -ac -t 10
      5) GET parameter fuzzing: ffuf -u "$TARGET/page.php?FUZZ=test" -w wordlists/common.txt -fs 0 -t 10
      6) POST data fuzzing: ffuf -u $TARGET/login.php -X POST -d "username=admin&password=FUZZ" -w wordlists/rockyou.txt -fc 401 -t 10
      7) Header fuzzing (Host header for vhosts): ffuf -u $TARGET -H "Host: FUZZ.example.com" -w wordlists/subdomains-top1million-5000.txt -fs 0 -t 10
      8) Multiple wordlists with FUZZ/FUZ2: ffuf -u $TARGET/FUZZ -w wordlists/common.txt:FUZZ -w wordlists/extensions.txt:FUZ2 -t 10
      9) Output to file (-o with -of json): ffuf -u $TARGET/FUZZ -w wordlists/common.txt -o results.json -of json -t 10
      10) Rate limiting (-rate): ffuf -u $TARGET/FUZZ -w wordlists/common.txt -rate 50 -t 10
    - Use -t 10 in ALL examples (ffuf defaults to 40 which overwhelms lab targets -- per research PITFALL-5)
    - Interactive demo: check wordlist exists at $PROJECT_ROOT/wordlists/common.txt first; if missing, print "Run: make wordlists" and skip. If present: run "ffuf -u $TARGET/FUZZ -w $PROJECT_ROOT/wordlists/common.txt -t 10" with || true guard.

    **fuzz-parameters.sh** (use-case script):
    - Source common.sh, show_help, help flag check
    - require_cmd ffuf with same install hint
    - TARGET="${1:-http://localhost:8080}" (sensible default -- DVWA)
    - WORDLIST="${2:-$PROJECT_ROOT/wordlists/common.txt}"
    - Check wordlist exists: if not, warn and print "make wordlists" instruction, then exit 1
    - safety_banner
    - Educational context: "Why fuzz parameters?" explaining hidden parameters, debug flags, admin toggles, IDOR vulnerabilities
    - 10 numbered examples focused on parameter fuzzing scenarios:
      1) Discover GET parameters: ?FUZZ=test
      2) Discover parameter values: ?id=FUZZ
      3) POST parameter discovery: -X POST -d "FUZZ=test"
      4) POST value fuzzing: -X POST -d "username=admin&password=FUZZ"
      5) Filter by response code (-fc 302 for redirects)
      6) Filter by response size (-fs) to remove noise
      7) Filter by word count (-fw) for consistent responses
      8) Match by response line count (-ml) for specific responses
      9) JSON POST fuzzing: -H "Content-Type: application/json" -d '{"FUZZ":"test"}'
      10) Combine parameter name + value fuzzing with FUZZ and FUZ2
    - Interactive demo: same wordlist check, then run ffuf -u "$TARGET/FUZZ" with -t 10 and common.txt

    All scripts must use "echo" for command display (not running commands), follow the info "N) Title" + echo "   command" format exactly.
  </action>
  <verify>
    bash scripts/ffuf/examples.sh --help
    bash scripts/ffuf/fuzz-parameters.sh --help
    Both should print help and exit 0.
    shellcheck scripts/ffuf/*.sh (if available) should show no errors.
  </verify>
  <done>
    Two scripts exist in scripts/ffuf/, each following the established pattern with show_help, require_cmd, safety_banner, 10 numbered examples, and interactive demo with wordlist existence check. All examples use -t 10 (not ffuf's default 40).
  </done>
</task>

<task type="auto">
  <name>Task 2: Integrate ffuf into check-tools.sh, Makefile, and create site page</name>
  <files>
    scripts/check-tools.sh
    Makefile
    site/src/content/docs/tools/ffuf.mdx
  </files>
  <action>
    **check-tools.sh changes** (building on 07-01 which already added gobuster):
    1. Add ffuf to TOOLS associative array:
       [ffuf]="brew install ffuf (or: go install github.com/ffuf/ffuf/v2@latest)"
    2. Add ffuf to TOOL_ORDER array (append after gobuster):
       TOOL_ORDER=(... gobuster ffuf)
    3. Add ffuf case to get_version():
       ffuf)
           ffuf -V 2>&1 | head -1
           ;;
       Place after the gobuster) case, before the *) default case.

    **Makefile changes** (building on 07-01 which already added gobuster targets):
    1. Add ffuf, fuzz-params to .PHONY line
    2. Add targets after the gobuster section:

       ffuf: ## Run ffuf examples (usage: make ffuf TARGET=<url>)
       	@bash scripts/ffuf/examples.sh $(TARGET)

       fuzz-params: ## Fuzz parameters (usage: make fuzz-params TARGET=<url>)
       	@bash scripts/ffuf/fuzz-parameters.sh $(or $(TARGET),http://localhost:8080)

    **ffuf.mdx site page:**
    Create site/src/content/docs/tools/ffuf.mdx following the traceroute.mdx pattern:
    - Frontmatter: title "ffuf -- Web Fuzzer", description, sidebar order 18 (after gobuster at 17)
    - import { Tabs, TabItem } from '@astrojs/starlight/components'
    - "What It Does" section: ffuf (Fuzz Faster U Fool) is a flexible web fuzzer that replaces the FUZZ keyword in URLs, headers, and POST data with wordlist entries. Unlike gobuster which focuses on directory enumeration, ffuf can fuzz any part of an HTTP request.
    - "Running the Examples Script" section with bash and make commands
    - "Key Flags to Remember" table: -u (URL with FUZZ keyword), -w (wordlist), -t (threads, default 40 -- use 10 for labs), -mc (match status codes), -fc (filter status codes), -fs (filter response size), -fw (filter word count), -fl (filter line count), -ac (auto-calibration), -X (HTTP method), -d (POST data), -H (headers), -o (output file), -of (output format), -rate (requests per second), -recursion (enable recursion), -e (extensions)
    - "Install" section with 3 OS tabs:
      macOS: brew install ffuf
      Debian/Ubuntu: Download binary from https://github.com/ffuf/ffuf/releases (note: not in apt repos)
      Go install: go install github.com/ffuf/ffuf/v2@latest
    - "Use-Case Scripts" section with fuzz-parameters.sh description and key commands
    - "The FUZZ Keyword" section: explain that FUZZ is the placeholder -- position it in URL for directory fuzzing, in query string for parameter discovery, in POST data for form fuzzing, in headers for vhost discovery. Second keyword is FUZ2.
    - "Notes" section: default 40 threads (use -t 10 for lab targets), -ac auto-calibration is very useful for filtering noise, wordlist requirement, -fs 0 filters empty responses
    - "Related Tools" section linking to gobuster, nikto, sqlmap
  </action>
  <verify>
    bash scripts/check-tools.sh 2>&1 | grep -i ffuf
    make help | grep -i ffuf
    make help | grep -i fuzz-params
    bash scripts/check-docs-completeness.sh (should pass for all tools including gobuster and ffuf)
  </verify>
  <done>
    make check shows ffuf detection status with install hint, make help lists ffuf and fuzz-params targets, and check-docs-completeness.sh passes with no missing docs pages.
  </done>
</task>

</tasks>

<verification>
1. bash scripts/ffuf/examples.sh --help exits 0
2. bash scripts/ffuf/fuzz-parameters.sh --help exits 0
3. bash scripts/check-tools.sh shows both gobuster and ffuf in output
4. make help shows ffuf and fuzz-params targets
5. bash scripts/check-docs-completeness.sh passes with 0 errors
6. grep -c 'ffuf' scripts/check-tools.sh returns matches for TOOLS, TOOL_ORDER, and get_version
</verification>

<success_criteria>
- scripts/ffuf/examples.sh prints 10 numbered educational ffuf examples with -t 10 in all commands
- scripts/ffuf/fuzz-parameters.sh prints 10 parameter fuzzing examples with wordlist existence check
- check-tools.sh detects ffuf with version via "ffuf -V" flag
- Makefile has ffuf and fuzz-params targets
- ffuf.mdx exists with install tabs, FUZZ keyword explanation, key flags
- check-docs-completeness.sh passes (all tools have docs pages)
</success_criteria>

<output>
After completion, create `.planning/phases/07-web-enumeration-tools/07-02-SUMMARY.md`
</output>
